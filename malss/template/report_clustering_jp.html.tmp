<html>

<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<title>分析結果レポート</title>
</head>

<body>
	<h1 id="top">分析結果</h1>

	<h2>クラスタリング <font size="-1">[<a href="#top">Back To Top</a>]</font></h2>
	<p>
		<ul>
			<li>クラスタリングは一般的に正解が与えられない（教師なし学習）ため，人が分析結果の妥当性を判断する必要があります．</li>
			<li>多くのクラスタリングアルゴリズム（MALSSが採用するものも）は，想定されるクラスタ数を人が設定してやる必要があります．しかし，真のクラスタ数は一般に未知です．そこでMALSSでは，あらかじめ与えられた複数のクラスタ数候補に対して分析を行います．</li>
			<li>適切なクラスタ数を判断する様々な指標が提案されています．MALSSでは，<strong>複数の指標から多数決でクラスタ数を推定</strong>します．</li>
			<li>MALSSがクラスタ数の判断に用いる指標は，Gap統計量，Silhouetteスコア，Davies-Bouldinスコア，Calinski and Harabaszスコアの４つです．</li>
		</ul>
	</p>
	<hr>

	<h2>データ概要 <font size="-1">[<a href="#top">Back To Top</a>]</font></h2>
	<ul>
		<li>データ数（行数）: {{ data.shape_before[0] }}</li>
		<li>特徴量数（列数）: {{ data.shape_before[1] }} (数値型: {{ data.shape_before[1] - data.del_columns|length }}, カテゴリ型: {{ data.del_columns|length }})</li>
		{%- if data.del_columns|length > 0 %}
		<ul>
			<li>カテゴリ型の特徴量は<a href="http://www.weblio.jp/content/%E3%83%80%E3%83%9F%E3%83%BC%E5%A4%89%E6%95%B0">ダミー変数</a>をつかって数値型に変換しています．</li>
		</ul>
		{%- endif %}
		{%- if data.col_was_null|length > 0 %}
		<li>{% for col in data.col_was_null %}{{ col }}列 {% endfor %}は欠損値（NA）を含んでいました．</li>
		<ul>
			<li>欠損値は最頻値（カテゴリカル型），中央値（整数型），平均値（実数型）に置換されます．</li>
			<li>参考）<a href="http://pandas.pydata.org/pandas-docs/stable/missing_data.html">様々な欠損値の処理方法</a></li>
		</ul>
		{%- endif %}
	</ul>
	<details>
	<summary><font size="+1"><strong>解説（クリックして中身を確認してください）</strong></font></summary>
	<ul>
		<li>クラスタリングはサンプル間の距離をみることが多いため，特徴量ごとの大きさが大きく異なっている（例えば特徴量１は身長[m]で1桁のオーダー，特徴量２は体重[g]で5桁のオーダー）と上手くクラスタリングできないことがあります（数値の小さい身長の影響が無視されてしまう）．<br>そこで，MALSSの初期設定では各特徴量を平均が0，分散が1になるように<strong>標準化</strong>しています．標準化が不要な場合は，コンストラクタの引数を <i>standardize=False</i> にしてください．</li>
		<li>数値データであってもカテゴリ型として扱わなければいけない変数（例えば市区町村コードなど）もあるので注意してください．この場合，<a href="http://www.weblio.jp/content/%E3%83%80%E3%83%9F%E3%83%BC%E5%A4%89%E6%95%B0">ダミー変数</a>を用いて事前にデータ変換をしておく必要があります．</li>
	</ul>
	</details>
	<hr>

	<h2>k-means <font size="-1">[<a href="#top">Back To Top</a>]</font></h2>
	<p>
		<ul>
			<li>k-meansクラスタリングは最もポピュラーなクラスタリングアルゴリズムの１つです．</li>
			<li>k-meansクラスタリングは，<strong>各クラスタのサイズが同じである</strong>ことを仮定していることに注意が必要です．この仮定が妥当でないデータにk-meansクラスタリングを適用した場合，望ましいクラスタリング結果が得られない可能性があります．</li>
		</ul>
	</p>

	<h3>Gap統計量（Gap statistics）</h3>
	<img border="0" src="gap_{{ algorithms[0].estimator.__class__.__name__ }}.png" height="300" alt="gap_statistics">

	<h3>Silhouette score</h3>
	<img border="0" src="silhouette_{{ algorithms[0].estimator.__class__.__name__ }}.png" height="300" alt="silhouette_score">
    
	<h3>Davies-Bouldin score</h3>
	<img border="0" src="davies_{{ algorithms[0].estimator.__class__.__name__ }}.png" height="300" alt="davies_bouldin_score">
    
	<h3>Calinski and Harabasz score</h3>
	<img border="0" src="calinski_{{ algorithms[0].estimator.__class__.__name__ }}.png" height="300" alt="calinski_harabasz_score">
    
</body>
</html>